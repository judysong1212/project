<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="Dlgn0300">
	
	<typeAlias alias="hashMap" type="java.util.HashMap"/>
    <typeAlias alias="list" type="java.util.List"/>
    <typeAlias alias="int" type="java.lang.Integer"/>
    <typeAlias alias="string" type="java.lang.String"/>
	<typeAlias alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias alias="dlgn0300Dto" type="com.app.exterms.dlgn.client.dto.Dlgn0300DTO"/>
	<typeAlias  alias="dlgn0300SrhVO" type="com.app.exterms.dlgn.server.vo.Dlgn0300SrhVO"/>
	
	<select id="dlgn0300DAO.selectDlgn0300" parameterClass="dlgn0300Dto" resultClass="egovMap">
		SELECT  C.HAN_NM
			  , A.DILNLAZ_YR_MNTH
			  , FCBASS0300CDNM(A.DPOB_CD, A.PAY_CD)			AS PAY_CD
			  , FCBASS0300CDNM(A.DPOB_CD, A.EMYMT_DIV_CD)	AS EMYMT_DIV_CD
			  , FCBASS0400CDNM(A.DPOB_CD, A.DEPT_CD, '2')	AS DEPT_CD
			  , FCBASS0500CDNM(A.DPOB_CD, TO_CHAR(TO_DATE(C.EMYMT_BGNN_DT, 'YYYYMMDD'), 'YYYY'), A.DEPT_CD, A.BUSIN_CD) AS BUSIN_CD
			  , FCBASS0320CDNM(A.DPOB_CD, A.TYP_OCCU_CD)	AS TYP_OCCU_CD
			  , A.DILNLAZ_DUTY_NUM_DYS
			  , A.DILNLAZ_LVSG_NUM_DYS
			  , A.DILNLAZ_ABNCE_NUM_DYS
			  , A.DILNLAZ_SCKLEA_NUM_DYS
			  , A.DILNLAZ_OFFVA_NUM_DYS
			  , A.DILNLAZ_FMLY_EVNT_NUM_DYS
			  , A.DILNLAZ_HLTH_CRE_NUM_DYS
			  , A.DILNLAZ_TOT_DUTY_NUM_DYS
			  , A.DILNLAZ_WKLY_HLDY_NUM_DYS
			  , A.DILNLAZ_PAID_PUBC_HODY_NUM
			  , A.DILNLAZ_DDLNE_PRCS_YN
			  , NVL(A.DILNLAZ_SPCL_HODY_NUM_DYS,	  0)	AS DILNLAZ_SPCL_HODY_NUM_DYS
			  , NVL(A.DILNLAZ_SAT_DUTY_NUM_DYS,		  0)	AS DILNLAZ_SAT_DUTY_NUM_DYS
			  , NVL(A.DILNLAZ_PUBC_HODY_DUTY_NUM_DYS, 0)	AS DILNLAZ_PUBC_HODY_DUTY_NUM_DYS
			  , NVL(A.DILNLAZ_ABNCE_DUTY_RCGTN_DYS,	  0)	AS DILNLAZ_ABNCE_DUTY_RCGTN_DYS
			  , NVL(A.DILNLAZ_TOT_DUTY_TM,			  0)	AS DILNLAZ_TOT_DUTY_TM
			  , NVL(A.DILNLAZ_PAID_HODY_NUM_DYS,	  0)	AS DILNLAZ_PAID_HODY_NUM_DYS
			  , NVL(A.DILNLAZ_TFC_ASS_CST_NUM_DYS,	  0)	AS DILNLAZ_TFC_ASS_CST_NUM_DYS
			  , NVL(A.DILNLAZ_LNCH_DYS,				  0)	AS DILNLAZ_LNCH_DYS
			  , NVL(B.DILNLAZ_PUBC_HODY_DUTY_NUM_DYS, 0)	AS DILNLAZ_PUBC_HODY_DUTY_NUM_DYS
			  , NVL(B.DILNLAZ_PUBC_HODY_DUTY_TM,	  0)	AS DILNLAZ_PUBC_HODY_DUTY_TM
			  , B.DILNLAZ_TOT_NTOT_NUM_DYS
			  , B.DILNLAZ_TOT_NTOT_TM
			  , B.DILNLAZ_FNDTN_TM_RST_DUTY_TM
			  , B.DILNLAZ_TM_RST_DUTY_TM
			  , B.DILNLAZ_TOT_TM_RST_DUTY_TM
		FROM	DLGN0100 A
			  , DLGN0200 B
			  , PSNL0100 C
		WHERE	A.DPOB_CD						= B.DPOB_CD(+)
		AND		A.SYSTEMKEY						= B.SYSTEMKEY(+)
		AND		A.DILNLAZ_YR_MNTH				= B.DILNLAZ_EXCE_DUTY_YR_MNTH(+)
		AND		A.PAY_CD						= B.PAY_CD(+)
		AND		A.DPOB_CD						= C.DPOB_CD
		AND		A.SYSTEMKEY						= C.SYSTEMKEY
		AND		SUBSTR(A.DILNLAZ_YR_MNTH, 1, 4) = SUBSTR(#dilnlazYrMnth#, 1, 4)
		AND		SUBSTR(A.DILNLAZ_YR_MNTH, -2)	= SUBSTR(#dilnlazYrMnth#, -2)
		<isNotNull property="emymtDivCd">
			<isNotEmpty property="emymtDivCd">
				AND A.EMYMT_DIV_CD = #emymtDivCd#
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="businCd">
			<isNotEmpty property="businCd">
				AND A.BUSIN_CD = #businCd#
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="currAffnDeptCd">
			<isNotEmpty property="currAffnDeptCd">
				AND A.DEPT_CD = #currAffnDeptCd#
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="deptCd">
			<isNotEmpty property="deptCd">
				AND C.DEPT_CD = #deptCd#
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="hanNm">
			<isNotEmpty property="hanNm">
				AND C.HAN_NM = #hanNm#
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="resnRegnNum">
			<isNotEmpty property="resnRegnNum">
				AND C.RESN_REGN_NUM = #resnRegnNum#
			</isNotEmpty>
		</isNotNull>
		ORDER BY  A.PAY_CD
				, A.EMYMT_DIV_CD
				, A.DEPT_CD
				, A.BUSIN_CD
				, A.TYP_OCCU_CD
				, C.HAN_NM
	</select>
	
	<select id="dlgn0300DAO.selectDlgn0300List_D" parameterClass="dlgn0300SrhVO" resultClass="egovMap">
		SELECT * FROM (
			SELECT	A.*
				  , ROWNUM RNUM
			FROM	(SELECT	 FF.DPOB_CD
						   , FF.SYSTEMKEY
						   , FF.DILNLAZ_YR_MNTH
						   , FF.PAY_CD 
						   , fcBass0300CDNM(FF.DPOB_CD, FF.PAY_CD)												   AS PAY_NM
						   , BB.HAN_NM  
						   , BB.RESN_REGN_NUM 
						   , FF.EMYMT_DIV_CD
						   , fcBass0300CDNM(FF.DPOB_CD, FF.EMYMT_DIV_CD)										   AS EMYMT_DIV_NM
						   , FF.DEPT_CD
						   , fcBass0400CDNM(FF.DPOB_CD, FF.DEPT_CD, '2')										   AS DEPT_NM
						   , FF.BUSIN_CD
						   , fcBass0500CDNM(FF.DPOB_CD, SUBSTR(FF.DILNLAZ_YR_MNTH, 1, 4), FF.DEPT_CD, FF.BUSIN_CD) AS BUSIN_NM
						   , FF.TYP_OCCU_CD
						   , fcBass0320CDNM(FF.DPOB_CD, FF.TYP_OCCU_CD)											   AS TYP_OCCU_NM
						   , FF.PYSP_GRDE_CD
						   , fcBass0300CDNM(FF.DPOB_CD, FF.PYSP_GRDE_CD)										   AS PYSP_GRDE_NM
						   , FF.DTIL_OCCU_CLS_DIV_CD
						   , FF.DTIL_OCCU_INTTN_CD 
						   , fcBassEx0350CDNM(FF.DPOB_CD, FF.TYP_OCCU_CD, FF.DTIL_OCCU_INTTN_CD, '1')			   AS DTIL_OCCU_CLS_DIV_NM 
						   , FF.DILNLAZ_DUTY_BGNN_DT
						   , FF.DILNLAZ_DUTY_END_DT
						   , NVL(FF.DILNLAZ_DUTY_NUM_DYS,			0) AS DILNLAZ_DUTY_NUM_DYS
						   , NVL(FF.DILNLAZ_LVSG_NUM_DYS,			0) AS DILNLAZ_LVSG_NUM_DYS
						   , NVL(FF.DILNLAZ_ABNCE_NUM_DYS,			0) AS DILNLAZ_ABNCE_NUM_DYS
						   , NVL(FF.DILNLAZ_SCKLEA_NUM_DYS,			0) AS DILNLAZ_SCKLEA_NUM_DYS
						   , NVL(FF.DILNLAZ_OFFVA_NUM_DYS,			0) AS DILNLAZ_OFFVA_NUM_DYS
						   , NVL(FF.DILNLAZ_FMLY_EVNT_NUM_DYS,		0) AS DILNLAZ_FMLY_EVNT_NUM_DYS
						   , NVL(FF.DILNLAZ_HLTH_CRE_NUM_DYS,		0) AS DILNLAZ_HLTH_CRE_NUM_DYS
						   , NVL(FF.DILNLAZ_TOT_DUTY_NUM_DYS,		0) AS DILNLAZ_TOT_DUTY_NUM_DYS
						   , NVL(FF.DILNLAZ_WKLY_HLDY_NUM_DYS,		0) AS DILNLAZ_WKLY_HLDY_NUM_DYS
						   , NVL(FF.DILNLAZ_PAID_PUBC_HODY_NUM,		0) AS DILNLAZ_PAID_PUBC_HODY_NUM
						   , NVL(FF.DILNLAZ_SPCL_HODY_NUM_DYS,		0) AS DILNLAZ_SPCL_HODY_NUM_DYS
						   , NVL(FF.DILNLAZ_SAT_DUTY_NUM_DYS,		0) AS DILNLAZ_SAT_DUTY_NUM_DYS
						   , NVL(FF.DILNLAZ_HODY_DUTY_NUM_DYS, 		0) AS DILNLAZ_HODY_DUTY_NUM_DYS
						   , NVL(GG.DILNLAZ_PUBC_HODY_DUTY_NUM_DYS, 0) AS DILNLAZ_PUBC_HODY_DUTY_NUM_DYS
						   , NVL(FF.DILNLAZ_ABNCE_DUTY_RCGTN_DYS,	0) AS DILNLAZ_ABNCE_DUTY_RCGTN_DYS
						   , NVL(FF.DILNLAZ_TOT_DUTY_TM,			0) AS DILNLAZ_TOT_DUTY_TM
						   , NVL(FF.DILNLAZ_PAID_HODY_NUM_DYS,		0) AS DILNLAZ_PAID_HODY_NUM_DYS
						   , NVL(FF.DILNLAZ_TFC_ASS_CST_NUM_DYS,	0) AS DILNLAZ_TFC_ASS_CST_NUM_DYS
						   , NVL(FF.DILNLAZ_LNCH_DYS,				0) AS DILNLAZ_LNCH_DYS
						   , NVL(FF.DILNLAZ_BUTP_DYS,				0) AS DILNLAZ_BUTP_DYS
						   , NVL(FF.DILNLAZ_WKD_DUTY_NUM_DYS,		0) AS DILNLAZ_WKD_DUTY_NUM_DYS
						   , NVL(GG.DILNLAZ_PUBC_HODY_DUTY_TM,		0)/60 AS DILNLAZ_PUBC_HODY_DUTY_TM
						   , NVL(GG.DILNLAZ_HODY_TOT_NTOT_TM,       0)/60 AS DILNLAZ_HODY_TOT_NTOT_TM
						   , NVL(GG.DILNLAZ_TOT_NTOT_NUM_DYS,		0) AS DILNLAZ_TOT_NTOT_NUM_DYS
						   , NVL(GG.DILNLAZ_TOT_NTOT_TM,			0) AS DILNLAZ_TOT_NTOT_TM
						   , NVL(GG.DILNLAZ_FNDTN_TM_RST_DUTY_TM,	0) AS DILNLAZ_FNDTN_TM_RST_DUTY_TM
						   , NVL(GG.DILNLAZ_TM_RST_DUTY_TM,			0) AS DILNLAZ_TM_RST_DUTY_TM
						   , NVL(GG.DILNLAZ_TOT_TM_RST_DUTY_TM,		0) AS DILNLAZ_TOT_TM_RST_DUTY_TM
					 FROM	 PAYR0500 AA
						   , PSNL0100 BB
						   , DLGN0100 FF
						   , DLGN0200 GG
					 WHERE	 AA.DPOB_CD			= BB.DPOB_CD
					 AND	 AA.SYSTEMKEY		= BB.SYSTEMKEY 
					 AND	 AA.DPOB_CD			= FF.DPOB_CD 
					 AND	 AA.SYSTEMKEY		= FF.SYSTEMKEY  
					 AND	 FF.DILNLAZ_YR_MNTH = GG.DILNLAZ_EXCE_DUTY_YR_MNTH(+) 
					 AND	 FF.PAY_CD			= GG.PAY_CD(+) 
					 AND	 FF.DPOB_CD			= GG.DPOB_CD(+) 
					 AND	 FF.SYSTEMKEY		= GG.SYSTEMKEY(+)  
					 <isNotEmpty prepend="AND" property="dpobCd" >
						AA.DPOB_CD = #dpobCd#
					 </isNotEmpty>
					 AND EXISTS (
                        SELECT  C.DPOB_CD,
                                 C.DTIL_OCCU_INTTN_CD,
                                 C.TYP_OCCU_CD,
                                 C.DEPT_CD FROM 
                                             ( SELECT * 
                                                 FROM TABLE(PKG_DTIL_AUTH.FN_DTIL_AUTH_TB(#dpobCd#,#payrMangDeptYn#,#payrMangDeptCd#,#deptCd#,#usrId#,#deptCdAuth#,'' ))) C
                                            WHERE     C.DPOB_CD = BB.DPOB_CD
						                        AND C.DEPT_CD = BB.CURR_AFFN_DEPT_CD
						                        AND NVL(C.TYP_OCCU_CD,'TT')  = NVL(BB.TYP_OCCU_CD,'TT') 
                                                AND NVL(C.DTIL_OCCU_INTTN_CD,'TT')  = NVL(BB.DTIL_OCCU_INTTN_CD,'TT')
                                               <isNotEmpty property="deptCd" prepend="AND">
												<![CDATA[
												 C.DEPT_CD
												]]>
												<iterate prepend="IN" property="deptCdArr" open="(" close=")" conjunction=",">
												 #deptCdArr[]#
												</iterate>
												</isNotEmpty> 
                                          )  
				       <isNotEmpty prepend="AND" property="businCd" >
					 	BB.BUSIN_CD=#businCd#
				       </isNotEmpty> 
				       <isNotEmpty prepend="AND" property="payrMangDeptCd" >
					 	AA.PAYR_MANG_DEPT_CD=#payrMangDeptCd#
				       </isNotEmpty> 
				       <isNotEmpty prepend="AND" property="emymtDivCd" >
					 	BB.EMYMT_DIV_CD=#emymtDivCd#
					 	</isNotEmpty>
				       <isNotEmpty prepend="AND" property="payCd" >
					 	FF.PAY_CD=#payCd#
				       </isNotEmpty> 
				         <isNotEmpty prepend="AND" property="pymtYrMnth" >
					 	FF.DILNLAZ_YR_MNTH = #pymtYrMnth#
				       </isNotEmpty>  
				       <isNotEmpty prepend="AND" property="repbtyBusinDivCd">
							BB.REPBTY_BUSIN_DIV_CD = #repbtyBusinDivCd# 
				    	</isNotEmpty>
				       <isNotEmpty property="typOccuCd" prepend="AND">
							<![CDATA[
							 BB.TYP_OCCU_CD
							]]>
							<iterate prepend="IN" property="typOccuCdArr" open="(" close=")" conjunction=",">
							 #typOccuCdArr[]#
							</iterate>
							</isNotEmpty>  
						   <!--  <isNotEmpty property="pyspGrdeCd" prepend="AND">
							<![CDATA[
							 NVL(BB.PYSP_GRDE_CD,'A0060000')
							]]>
							<iterate prepend="IN" property="pyspGrdeCdArr" open="(" close=")" conjunction=",">
							 #pyspGrdeCdArr[]#
							</iterate>
							</isNotEmpty>  --> 
							 <isNotEmpty property="dtilOccuInttnCd" prepend="AND">
							<![CDATA[
								 BB.DTIL_OCCU_INTTN_CD
							]]>
							<iterate prepend="IN" property="dtilOccuInttnCdArr" open="(" close=")" conjunction=",">
								 #dtilOccuInttnCdArr[]#
							</iterate>
						</isNotEmpty>
				         <isNotEmpty prepend="AND" property="systemkey" >
					 	BB.SYSTEMKEY=#systemkey#
				       </isNotEmpty>  
				       <isNotEmpty prepend="AND" property="hanNm" >
					 	BB.HAN_NM LIKE '%' || #hanNm# || '%'
				       </isNotEmpty>   
					ORDER BY 
						FF.DPOB_CD ASC
						, FF.DILNLAZ_YR_MNTH DESC
						, PAY_CD ASC
						,(SELECT LPAD(DEPT_RANK,5,'0')  
                                   FROM BASS0400 DD
                                   WHERE DD.DEPT_CD = BB.CURR_AFFN_DEPT_CD
                                     AND DD.DPOB_CD = BB.DPOB_CD) ASC 
					        
						, BB.RESN_REGN_NUM ASC
						 , BB.SYSTEMKEY ASC 
		
				<![CDATA[					
			) A WHERE ROWNUM <= #lastIndex#
		)WHERE RNUM >= #firstIndex#
		]]>
	</select>	
	<select id="dlgn0300DAO.selectDlgn0300ListTotCnt_S" parameterClass="dlgn0300SrhVO" resultClass="int">
			SELECT COUNT(*) totcnt
			 FROM PAYR0500 AA, PSNL0100 BB ,  DLGN0100 FF, DLGN0200 GG
                     WHERE AA.DPOB_CD = BB.DPOB_CD
                     AND  AA.SYSTEMKEY= BB.SYSTEMKEY 
                     AND  AA.DPOB_CD = FF.DPOB_CD 
                     AND  AA.SYSTEMKEY= FF.SYSTEMKEY   
                     AND  FF.DPOB_CD = GG.DPOB_CD (+)
                     AND  FF.DILNLAZ_YR_MNTH = GG.DILNLAZ_EXCE_DUTY_YR_MNTH(+) 
                     AND  FF.PAY_CD =  GG.PAY_CD(+) 
                     AND  FF.SYSTEMKEY= GG.SYSTEMKEY(+)  
                   <isNotEmpty prepend="AND" property="dpobCd" >
			 	     AA.DPOB_CD=#dpobCd#
		           </isNotEmpty>
		       AND EXISTS  (
                            SELECT  C.DPOB_CD,
                                 C.DTIL_OCCU_INTTN_CD,
                                 C.TYP_OCCU_CD,
                                 C.DEPT_CD FROM 
                                             ( SELECT * 
                                                 FROM TABLE(PKG_DTIL_AUTH.FN_DTIL_AUTH_TB(#dpobCd#,#payrMangDeptYn#,#payrMangDeptCd#,#deptCd#,#usrId#,#deptCdAuth#,'' ))) C
                                            WHERE     C.DPOB_CD = BB.DPOB_CD
						                        AND C.DEPT_CD = BB.CURR_AFFN_DEPT_CD
						                        AND NVL(C.TYP_OCCU_CD,'TT')  = NVL(BB.TYP_OCCU_CD,'TT') 
                                                AND NVL(C.DTIL_OCCU_INTTN_CD,'TT')  = NVL(BB.DTIL_OCCU_INTTN_CD,'TT')
                                               <isNotEmpty property="deptCd" prepend="AND">
												<![CDATA[
												 C.DEPT_CD
												]]>
												<iterate prepend="IN" property="deptCdArr" open="(" close=")" conjunction=",">
												 #deptCdArr[]#
												</iterate>
												</isNotEmpty>  
                                          )  
				       <isNotEmpty prepend="AND" property="businCd" >
					 	BB.BUSIN_CD=#businCd#
				       </isNotEmpty> 
				       <isNotEmpty prepend="AND" property="payrMangDeptCd" >
					 	AA.PAYR_MANG_DEPT_CD=#payrMangDeptCd#
				       </isNotEmpty> 
				       <isNotEmpty prepend="AND" property="emymtDivCd" >
					 	BB.EMYMT_DIV_CD=#emymtDivCd#
					 	</isNotEmpty>
				       <isNotEmpty prepend="AND" property="payCd" >
					 	FF.PAY_CD=#payCd#
				       </isNotEmpty> 
				         <isNotEmpty prepend="AND" property="pymtYrMnth" >
					 	FF.DILNLAZ_YR_MNTH = #pymtYrMnth#
				       </isNotEmpty>  
				       <isNotEmpty prepend="AND" property="repbtyBusinDivCd">
							BB.REPBTY_BUSIN_DIV_CD = #repbtyBusinDivCd# 
				    	</isNotEmpty>
				        <isNotEmpty property="typOccuCd" prepend="AND">
							<![CDATA[
							 BB.TYP_OCCU_CD
							]]>
							<iterate prepend="IN" property="typOccuCdArr" open="(" close=")" conjunction=",">
							 #typOccuCdArr[]#
							</iterate>
							</isNotEmpty>  
						    <isNotEmpty property="pyspGrdeCd" prepend="AND">
							<![CDATA[
							 NVL(BB.PYSP_GRDE_CD,'A0060000')
							]]>
							<iterate prepend="IN" property="pyspGrdeCdArr" open="(" close=")" conjunction=",">
							 #pyspGrdeCdArr[]#
							</iterate>
							</isNotEmpty>  
							 <isNotEmpty property="dtilOccuInttnCd" prepend="AND">
						<![CDATA[
							 BB.DTIL_OCCU_INTTN_CD
						]]>
						<iterate prepend="IN" property="dtilOccuInttnCdArr" open="(" close=")" conjunction=",">
							 #dtilOccuInttnCdArr[]#
						</iterate>
					  </isNotEmpty>  
				     <isNotEmpty prepend="AND" property="systemkey" >
					 	BB.SYSTEMKEY=#systemkey#
				       </isNotEmpty>  
				       <isNotEmpty prepend="AND" property="hanNm" >
					 	BB.HAN_NM LIKE '%' || #hanNm# || '%'
				       </isNotEmpty>  
	</select>
	
	
	
	<!-- 근무실적 dlgn0300 엑셀저장  -->
	<select id="dlgn0300DAO.selectXlsFileDlgn0300List_D" parameterClass="dlgn0300SrhVO" resultClass="egovMap">
 	 
		   SELECT
                  FF.DPOB_CD
                , FF.SYSTEMKEY
                , FF.DILNLAZ_YR_MNTH
                , FF.PAY_CD 
                 , fcBass0300CDNM(FF.DPOB_CD,FF.PAY_CD) AS PAY_NM
                , BB.HAN_NM  
                , BB.RESN_REGN_NUM 
                , FF.EMYMT_DIV_CD
                , fcBass0300CDNM(FF.DPOB_CD,FF.EMYMT_DIV_CD) AS EMYMT_DIV_NM
                , FF.DEPT_CD
                 , fcBass0400CDNM(FF.DPOB_CD,FF.DEPT_CD,'2') AS DEPT_NM
                , FF.BUSIN_CD
                 , fcBass0500CDNM(FF.DPOB_CD,SUBSTR(FF.DILNLAZ_YR_MNTH,1,4),FF.DEPT_CD,FF.BUSIN_CD) AS BUSIN_NM
                , FF.TYP_OCCU_CD
                 , fcBass0320CDNM(FF.DPOB_CD,FF.TYP_OCCU_CD) AS TYP_OCCU_NM
                , FF.PYSP_GRDE_CD
                 , fcBass0300CDNM(FF.DPOB_CD,FF.PYSP_GRDE_CD) AS PYSP_GRDE_NM
                , FF.DTIL_OCCU_CLS_DIV_CD
                , FF.DTIL_OCCU_INTTN_CD 
		        , fcBassEx0350CDNM(FF.DPOB_CD,FF.TYP_OCCU_CD,FF.DTIL_OCCU_INTTN_CD,'1' ) AS DTIL_OCCU_CLS_DIV_NM 
                , FF.DILNLAZ_DUTY_BGNN_DT
                , FF.DILNLAZ_DUTY_END_DT
                , NVL(FF.DILNLAZ_DUTY_NUM_DYS,0) AS DILNLAZ_DUTY_NUM_DYS
                , NVL(FF.DILNLAZ_LVSG_NUM_DYS,0) AS DILNLAZ_LVSG_NUM_DYS
                , NVL(FF.DILNLAZ_ABNCE_NUM_DYS,0) AS DILNLAZ_ABNCE_NUM_DYS
                , NVL(FF.DILNLAZ_SCKLEA_NUM_DYS,0) AS DILNLAZ_SCKLEA_NUM_DYS
                , NVL(FF.DILNLAZ_OFFVA_NUM_DYS,0) AS DILNLAZ_OFFVA_NUM_DYS
                , NVL(FF.DILNLAZ_FMLY_EVNT_NUM_DYS,0) AS DILNLAZ_FMLY_EVNT_NUM_DYS
                , NVL(FF.DILNLAZ_HLTH_CRE_NUM_DYS,0) AS DILNLAZ_HLTH_CRE_NUM_DYS
                , NVL(FF.DILNLAZ_TOT_DUTY_NUM_DYS,0) AS DILNLAZ_TOT_DUTY_NUM_DYS
                , NVL(FF.DILNLAZ_WKLY_HLDY_NUM_DYS,0) AS DILNLAZ_WKLY_HLDY_NUM_DYS
                , NVL(FF.DILNLAZ_PAID_PUBC_HODY_NUM ,0) AS DILNLAZ_PAID_PUBC_HODY_NUM
                , NVL(FF.DILNLAZ_SPCL_HODY_NUM_DYS,0) AS DILNLAZ_SPCL_HODY_NUM_DYS
                , NVL(FF.DILNLAZ_SAT_DUTY_NUM_DYS,0) AS DILNLAZ_SAT_DUTY_NUM_DYS
                , NVL(FF.DILNLAZ_HODY_DUTY_NUM_DYS,0) AS DILNLAZ_HODY_DUTY_NUM_DYS
                , NVL(GG.DILNLAZ_PUBC_HODY_DUTY_NUM_DYS,0) AS DILNLAZ_PUBC_HODY_DUTY_NUM_DYS
                , NVL(FF.DILNLAZ_ABNCE_DUTY_RCGTN_DYS ,0) AS DILNLAZ_ABNCE_DUTY_RCGTN_DYS
                , NVL(FF.DILNLAZ_TOT_DUTY_TM,0) AS DILNLAZ_TOT_DUTY_TM
                , NVL(FF.DILNLAZ_PAID_HODY_NUM_DYS,0) AS DILNLAZ_PAID_HODY_NUM_DYS
                , NVL(FF.DILNLAZ_TFC_ASS_CST_NUM_DYS,0) AS DILNLAZ_TFC_ASS_CST_NUM_DYS
                , NVL(FF.DILNLAZ_LNCH_DYS,0) AS DILNLAZ_LNCH_DYS
                , NVL(FF.DILNLAZ_BUTP_DYS,0) AS DILNLAZ_BUTP_DYS
                , NVL(FF.DILNLAZ_WKD_DUTY_NUM_DYS,0) AS DILNLAZ_WKD_DUTY_NUM_DYS
                , NVL(GG.DILNLAZ_PUBC_HODY_DUTY_TM,0)/60 AS DILNLAZ_PUBC_HODY_DUTY_TM
                , NVL(GG.DILNLAZ_HODY_TOT_NTOT_TM, 0)/60 AS DILNLAZ_HODY_TOT_NTOT_TM
                , NVL(GG.DILNLAZ_TOT_NTOT_NUM_DYS,0) AS DILNLAZ_TOT_NTOT_NUM_DYS
                , NVL(GG.DILNLAZ_TOT_NTOT_TM,0) AS DILNLAZ_TOT_NTOT_TM
                , NVL(GG.DILNLAZ_FNDTN_TM_RST_DUTY_TM,0) AS DILNLAZ_FNDTN_TM_RST_DUTY_TM
                , NVL(GG.DILNLAZ_TM_RST_DUTY_TM,0) AS DILNLAZ_TM_RST_DUTY_TM
                , NVL(GG.DILNLAZ_TOT_TM_RST_DUTY_TM ,0) AS DILNLAZ_TOT_TM_RST_DUTY_TM
                FROM PAYR0500 AA, PSNL0100 BB ,  DLGN0100 FF, DLGN0200 GG
                     WHERE AA.DPOB_CD = BB.DPOB_CD
                     AND  AA.SYSTEMKEY= BB.SYSTEMKEY 
                     AND  AA.DPOB_CD = FF.DPOB_CD 
                     AND  AA.SYSTEMKEY= FF.SYSTEMKEY  
                     AND  FF.DILNLAZ_YR_MNTH = GG.DILNLAZ_EXCE_DUTY_YR_MNTH(+)
                     AND  FF.PAY_CD =  GG.PAY_CD (+)
                     AND  FF.DPOB_CD = GG.DPOB_CD(+)
                     AND  FF.SYSTEMKEY= GG.SYSTEMKEY(+) 
                   <isNotEmpty prepend="AND" property="dpobCd" >
			 	     AA.DPOB_CD=#dpobCd#
		           </isNotEmpty>
		       AND EXISTS  (
                          SELECT  C.DPOB_CD,
                                 C.DTIL_OCCU_INTTN_CD,
                                 C.TYP_OCCU_CD,
                                 C.DEPT_CD FROM 
                                             ( SELECT * 
                                                 FROM TABLE(PKG_DTIL_AUTH.FN_DTIL_AUTH_TB(#dpobCd#,#payrMangDeptYn#,#payrMangDeptCd#,#deptCd#,#usrId#,#deptCdAuth#,'' ))) C
                                            WHERE     C.DPOB_CD = BB.DPOB_CD
						                        AND C.DEPT_CD = BB.CURR_AFFN_DEPT_CD
						                        AND NVL(C.TYP_OCCU_CD,'TT')  = NVL(BB.TYP_OCCU_CD,'TT') 
                                                AND NVL(C.DTIL_OCCU_INTTN_CD,'TT')  = NVL(BB.DTIL_OCCU_INTTN_CD,'TT')
                                               <isNotEmpty property="deptCd" prepend="AND">
												<![CDATA[
												 C.DEPT_CD
												]]>
												<iterate prepend="IN" property="deptCdArr" open="(" close=")" conjunction=",">
												 #deptCdArr[]#
												</iterate>
												</isNotEmpty> 
                                          )  
				       <isNotEmpty prepend="AND" property="businCd" >
					 	BB.BUSIN_CD=#businCd#
				       </isNotEmpty> 
				       <isNotEmpty prepend="AND" property="repbtyBusinDivCd">
							BB.REPBTY_BUSIN_DIV_CD = #repbtyBusinDivCd# 
				    	</isNotEmpty>
				       <isNotEmpty prepend="AND" property="payrMangDeptCd" >
					 	AA.PAYR_MANG_DEPT_CD=#payrMangDeptCd#
				       </isNotEmpty> 
				       <isNotEmpty prepend="AND" property="emymtDivCd" >
					 	BB.EMYMT_DIV_CD=#emymtDivCd#
					 	</isNotEmpty>
				       <isNotEmpty prepend="AND" property="payCd" >
					 	FF.PAY_CD=#payCd#
				       </isNotEmpty> 
				         <isNotEmpty prepend="AND" property="pymtYrMnth" >
					 	FF.DILNLAZ_YR_MNTH = #pymtYrMnth#
				       </isNotEmpty>  
				       <isNotEmpty property="typOccuCd" prepend="AND">
							<![CDATA[
							 BB.TYP_OCCU_CD
							]]>
							<iterate prepend="IN" property="typOccuCdArr" open="(" close=")" conjunction=",">
							 #typOccuCdArr[]#
							</iterate>
							</isNotEmpty>  
						 <!--    <isNotEmpty property="pyspGrdeCd" prepend="AND">
							<![CDATA[
							 NVL(BB.PYSP_GRDE_CD,'A0060000')
							]]>
							<iterate prepend="IN" property="pyspGrdeCdArr" open="(" close=")" conjunction=",">
							 #pyspGrdeCdArr[]#
							</iterate>
							</isNotEmpty>   -->
					    <isNotEmpty property="dtilOccuInttnCd" prepend="AND">
						<![CDATA[
							 BB.DTIL_OCCU_INTTN_CD
						]]>
						<iterate prepend="IN" property="dtilOccuInttnCdArr" open="(" close=")" conjunction=",">
							 #dtilOccuInttnCdArr[]#
						</iterate>
					</isNotEmpty>  
				         <isNotEmpty prepend="AND" property="systemkey" >
					 	BB.SYSTEMKEY=#systemkey#
				       </isNotEmpty>  
				       <isNotEmpty prepend="AND" property="hanNm" >
					 	BB.HAN_NM LIKE '%' || #hanNm# || '%'
				       </isNotEmpty>   
					ORDER BY 
						FF.DPOB_CD ASC
						, FF.DILNLAZ_YR_MNTH DESC
						, PAY_CD ASC
						,(SELECT LPAD(DEPT_RANK,5,'0')  
                                   FROM BASS0400 DD
                                   WHERE DD.DEPT_CD = BB.CURR_AFFN_DEPT_CD
                                     AND DD.DPOB_CD = BB.DPOB_CD) ASC 
					        
						, BB.RESN_REGN_NUM ASC
						 , BB.SYSTEMKEY ASC 
	
	<!-- 근태월별집계 인쇄 데이터 총 갯수 -->	 
	</select>
	
	<select id="dlgn0300DAO.selectDlgnP030001ToDlgn0300ListTotCnt" parameterClass="dlgn0300SrhVO" resultClass="egovMap">
		SELECT COUNT(*)
		FROM   (SELECT * FROM (
			SELECT	A.*
				  , ROWNUM RNUM
			FROM	(SELECT	 FF.DPOB_CD
						   , FF.SYSTEMKEY
						   , FF.DILNLAZ_YR_MNTH
						   , FF.PAY_CD 
						   , fcBass0300CDNM(FF.DPOB_CD, FF.PAY_CD)												   AS PAY_NM
						   , BB.HAN_NM  
						   , BB.RESN_REGN_NUM 
						   , FF.EMYMT_DIV_CD
						   , fcBass0300CDNM(FF.DPOB_CD, FF.EMYMT_DIV_CD)										   AS EMYMT_DIV_NM
						   , FF.DEPT_CD
						   , fcBass0400CDNM(FF.DPOB_CD, FF.DEPT_CD, '2')										   AS DEPT_NM
						   , FF.BUSIN_CD
						   , fcBass0500CDNM(FF.DPOB_CD, SUBSTR(FF.DILNLAZ_YR_MNTH, 1, 4), FF.DEPT_CD, FF.BUSIN_CD) AS BUSIN_NM
						   , FF.TYP_OCCU_CD
						   , fcBass0320CDNM(FF.DPOB_CD, FF.TYP_OCCU_CD)											   AS TYP_OCCU_NM
						   , FF.PYSP_GRDE_CD
						   , fcBass0300CDNM(FF.DPOB_CD, FF.PYSP_GRDE_CD)										   AS PYSP_GRDE_NM
						   , FF.DTIL_OCCU_CLS_DIV_CD
						   , FF.DTIL_OCCU_INTTN_CD 
						   , fcBassEx0350CDNM(FF.DPOB_CD, FF.TYP_OCCU_CD, FF.DTIL_OCCU_INTTN_CD, '1')			   AS DTIL_OCCU_CLS_DIV_NM 
						   , FF.DILNLAZ_DUTY_BGNN_DT
						   , FF.DILNLAZ_DUTY_END_DT
						   , NVL(FF.DILNLAZ_DUTY_NUM_DYS,			0) AS DILNLAZ_DUTY_NUM_DYS
						   , NVL(FF.DILNLAZ_LVSG_NUM_DYS,			0) AS DILNLAZ_LVSG_NUM_DYS
						   , NVL(FF.DILNLAZ_ABNCE_NUM_DYS,			0) AS DILNLAZ_ABNCE_NUM_DYS
						   , NVL(FF.DILNLAZ_SCKLEA_NUM_DYS,			0) AS DILNLAZ_SCKLEA_NUM_DYS
						   , NVL(FF.DILNLAZ_OFFVA_NUM_DYS,			0) AS DILNLAZ_OFFVA_NUM_DYS
						   , NVL(FF.DILNLAZ_FMLY_EVNT_NUM_DYS,		0) AS DILNLAZ_FMLY_EVNT_NUM_DYS
						   , NVL(FF.DILNLAZ_HLTH_CRE_NUM_DYS,		0) AS DILNLAZ_HLTH_CRE_NUM_DYS
						   , NVL(FF.DILNLAZ_TOT_DUTY_NUM_DYS,		0) AS DILNLAZ_TOT_DUTY_NUM_DYS
						   , NVL(FF.DILNLAZ_WKLY_HLDY_NUM_DYS,		0) AS DILNLAZ_WKLY_HLDY_NUM_DYS
						   , NVL(FF.DILNLAZ_PAID_PUBC_HODY_NUM,		0) AS DILNLAZ_PAID_PUBC_HODY_NUM
						   , NVL(FF.DILNLAZ_SPCL_HODY_NUM_DYS,		0) AS DILNLAZ_SPCL_HODY_NUM_DYS
						   , NVL(FF.DILNLAZ_SAT_DUTY_NUM_DYS,		0) AS DILNLAZ_SAT_DUTY_NUM_DYS
						   , NVL(GG.DILNLAZ_PUBC_HODY_DUTY_NUM_DYS, 0) AS DILNLAZ_PUBC_HODY_DUTY_NUM_DYS
						   , NVL(FF.DILNLAZ_ABNCE_DUTY_RCGTN_DYS,	0) AS DILNLAZ_ABNCE_DUTY_RCGTN_DYS
						   , NVL(FF.DILNLAZ_TOT_DUTY_TM,			0) AS DILNLAZ_TOT_DUTY_TM
						   , NVL(FF.DILNLAZ_PAID_HODY_NUM_DYS,		0) AS DILNLAZ_PAID_HODY_NUM_DYS
						   , NVL(FF.DILNLAZ_TFC_ASS_CST_NUM_DYS,	0) AS DILNLAZ_TFC_ASS_CST_NUM_DYS
						   , NVL(FF.DILNLAZ_LNCH_DYS,				0) AS DILNLAZ_LNCH_DYS
						   , NVL(GG.DILNLAZ_PUBC_HODY_DUTY_TM,		0) AS DILNLAZ_PUBC_HODY_DUTY_TM
						   , NVL(GG.DILNLAZ_TOT_NTOT_NUM_DYS,		0) AS DILNLAZ_TOT_NTOT_NUM_DYS
						   , NVL(GG.DILNLAZ_TOT_NTOT_TM,			0) AS DILNLAZ_TOT_NTOT_TM
						   , NVL(GG.DILNLAZ_FNDTN_TM_RST_DUTY_TM,	0) AS DILNLAZ_FNDTN_TM_RST_DUTY_TM
						   , NVL(GG.DILNLAZ_TM_RST_DUTY_TM,			0) AS DILNLAZ_TM_RST_DUTY_TM
						   , NVL(GG.DILNLAZ_TOT_TM_RST_DUTY_TM,		0) AS DILNLAZ_TOT_TM_RST_DUTY_TM
					 FROM	 PAYR0500 AA
						   , PSNL0100 BB
						   , DLGN0100 FF
						   , DLGN0200 GG
					 WHERE	 AA.DPOB_CD			= BB.DPOB_CD
					 AND	 AA.SYSTEMKEY		= BB.SYSTEMKEY 
					 AND	 AA.DPOB_CD			= FF.DPOB_CD 
					 AND	 AA.SYSTEMKEY		= FF.SYSTEMKEY  
					 AND	 FF.DILNLAZ_YR_MNTH = GG.DILNLAZ_EXCE_DUTY_YR_MNTH(+) 
					 AND	 FF.PAY_CD			= GG.PAY_CD(+) 
					 AND	 FF.DPOB_CD			= GG.DPOB_CD(+) 
					 AND	 FF.SYSTEMKEY		= GG.SYSTEMKEY(+)  
					 <isNotEmpty prepend="AND" property="dpobCd" >
						AA.DPOB_CD = #dpobCd#
					 </isNotEmpty>
					 AND EXISTS (
                        SELECT  C.DPOB_CD,
                                 C.DTIL_OCCU_INTTN_CD,
                                 C.TYP_OCCU_CD,
                                 C.DEPT_CD FROM 
                                             ( SELECT * 
                                                 FROM TABLE(PKG_DTIL_AUTH.FN_DTIL_AUTH_TB(#dpobCd#,#payrMangDeptYn#,#payrMangDeptCd#,#deptCd#,#usrId#,#deptCdAuth#,'' ))) C
                                            WHERE     C.DPOB_CD = BB.DPOB_CD
						                        AND C.DEPT_CD = BB.CURR_AFFN_DEPT_CD
						                        AND NVL(C.TYP_OCCU_CD,'TT')  = NVL(BB.TYP_OCCU_CD,'TT') 
                                                AND NVL(C.DTIL_OCCU_INTTN_CD,'TT')  = NVL(BB.DTIL_OCCU_INTTN_CD,'TT')
                                               <isNotEmpty property="deptCd" prepend="AND">
												<![CDATA[
												 C.DEPT_CD
												]]>
												<iterate prepend="IN" property="deptCdArr" open="(" close=")" conjunction=",">
												 #deptCdArr[]#
												</iterate>
												</isNotEmpty> 
                                          )  
				       <isNotEmpty prepend="AND" property="businCd" >
					 	BB.BUSIN_CD=#businCd#
				       </isNotEmpty> 
				       <isNotEmpty prepend="AND" property="payrMangDeptCd" >
					 	AA.PAYR_MANG_DEPT_CD=#payrMangDeptCd#
				       </isNotEmpty> 
				       <isNotEmpty prepend="AND" property="emymtDivCd" >
					 	BB.EMYMT_DIV_CD=#emymtDivCd#
					 	</isNotEmpty>
				       <isNotEmpty prepend="AND" property="payCd" >
					 	FF.PAY_CD=#payCd#
				       </isNotEmpty> 
				         <isNotEmpty prepend="AND" property="pymtYrMnth" >
					 	FF.DILNLAZ_YR_MNTH = #pymtYrMnth#
				       </isNotEmpty>  
				       <isNotEmpty prepend="AND" property="repbtyBusinDivCd">
							BB.REPBTY_BUSIN_DIV_CD = #repbtyBusinDivCd# 
				    	</isNotEmpty>
				       <isNotEmpty property="typOccuCd" prepend="AND">
							<![CDATA[
							 BB.TYP_OCCU_CD
							]]>
							<iterate prepend="IN" property="typOccuCdArr" open="(" close=")" conjunction=",">
							 #typOccuCdArr[]#
							</iterate>
							</isNotEmpty>  
						   <!--  <isNotEmpty property="pyspGrdeCd" prepend="AND">
							<![CDATA[
							 NVL(BB.PYSP_GRDE_CD,'A0060000')
							]]>
							<iterate prepend="IN" property="pyspGrdeCdArr" open="(" close=")" conjunction=",">
							 #pyspGrdeCdArr[]#
							</iterate>
							</isNotEmpty>  --> 
							 <isNotEmpty property="dtilOccuInttnCd" prepend="AND">
							<![CDATA[
								 BB.DTIL_OCCU_INTTN_CD
							]]>
							<iterate prepend="IN" property="dtilOccuInttnCdArr" open="(" close=")" conjunction=",">
								 #dtilOccuInttnCdArr[]#
							</iterate>
						</isNotEmpty>
				         <isNotEmpty prepend="AND" property="systemkey" >
					 	BB.SYSTEMKEY=#systemkey#
				       </isNotEmpty>  
				       <isNotEmpty prepend="AND" property="hanNm" >
					 	BB.HAN_NM LIKE '%' || #hanNm# || '%'
				       </isNotEmpty>   
					ORDER BY 
						FF.DPOB_CD ASC
						, FF.DILNLAZ_YR_MNTH DESC
						, PAY_CD ASC
						,(SELECT LPAD(DEPT_RANK,5,'0')  
                                   FROM BASS0400 DD
                                   WHERE DD.DEPT_CD = BB.CURR_AFFN_DEPT_CD
                                     AND DD.DPOB_CD = BB.DPOB_CD) ASC 
					        
						, BB.RESN_REGN_NUM ASC
						 , BB.SYSTEMKEY ASC 
		
				<![CDATA[					
			) A WHERE ROWNUM <= #lastIndex#
		)WHERE RNUM >= #firstIndex#
		)
		]]>
	</select>
	
	<!-- 근태월별집계 인쇄 데이터 목록 조회 -->
	<select id="dlgn0300DAO.selectInsrP430001ToInsr3400List" parameterClass="dlgn0300SrhVO" resultClass="egovMap">
		SELECT * FROM (
			SELECT	A.*
				  , ROWNUM RNUM
			FROM	(SELECT	 FF.DPOB_CD
						   , FF.SYSTEMKEY
						   , FF.DILNLAZ_YR_MNTH
						   , FF.PAY_CD 
						   , fcBass0300CDNM(FF.DPOB_CD, FF.PAY_CD)												   AS PAY_NM
						   , BB.HAN_NM  
						   , BB.RESN_REGN_NUM 
						   , FF.EMYMT_DIV_CD
						   , fcBass0300CDNM(FF.DPOB_CD, FF.EMYMT_DIV_CD)										   AS EMYMT_DIV_NM
						   , FF.DEPT_CD
						   , fcBass0400CDNM(FF.DPOB_CD, FF.DEPT_CD, '2')										   AS DEPT_NM
						   , FF.BUSIN_CD
						   , fcBass0500CDNM(FF.DPOB_CD, SUBSTR(FF.DILNLAZ_YR_MNTH, 1, 4), FF.DEPT_CD, FF.BUSIN_CD) AS BUSIN_NM
						   , FF.TYP_OCCU_CD
						   , fcBass0320CDNM(FF.DPOB_CD, FF.TYP_OCCU_CD)											   AS TYP_OCCU_NM
						   , FF.PYSP_GRDE_CD
						   , fcBass0300CDNM(FF.DPOB_CD, FF.PYSP_GRDE_CD)										   AS PYSP_GRDE_NM
						   , FF.DTIL_OCCU_CLS_DIV_CD
						   , FF.DTIL_OCCU_INTTN_CD 
						   , fcBassEx0350CDNM(FF.DPOB_CD, FF.TYP_OCCU_CD, FF.DTIL_OCCU_INTTN_CD, '1')			   AS DTIL_OCCU_CLS_DIV_NM 
						   , FF.DILNLAZ_DUTY_BGNN_DT
						   , FF.DILNLAZ_DUTY_END_DT
						   , NVL(FF.DILNLAZ_DUTY_NUM_DYS,			0) AS DILNLAZ_DUTY_NUM_DYS
						   , NVL(FF.DILNLAZ_LVSG_NUM_DYS,			0) AS DILNLAZ_LVSG_NUM_DYS
						   , NVL(FF.DILNLAZ_ABNCE_NUM_DYS,			0) AS DILNLAZ_ABNCE_NUM_DYS
						   , NVL(FF.DILNLAZ_SCKLEA_NUM_DYS,			0) AS DILNLAZ_SCKLEA_NUM_DYS
						   , NVL(FF.DILNLAZ_OFFVA_NUM_DYS,			0) AS DILNLAZ_OFFVA_NUM_DYS
						   , NVL(FF.DILNLAZ_FMLY_EVNT_NUM_DYS,		0) AS DILNLAZ_FMLY_EVNT_NUM_DYS
						   , NVL(FF.DILNLAZ_HLTH_CRE_NUM_DYS,		0) AS DILNLAZ_HLTH_CRE_NUM_DYS
						   , NVL(FF.DILNLAZ_TOT_DUTY_NUM_DYS,		0) AS DILNLAZ_TOT_DUTY_NUM_DYS
						   , NVL(FF.DILNLAZ_WKLY_HLDY_NUM_DYS,		0) AS DILNLAZ_WKLY_HLDY_NUM_DYS
						   , NVL(FF.DILNLAZ_PAID_PUBC_HODY_NUM,		0) AS DILNLAZ_PAID_PUBC_HODY_NUM
						   , NVL(FF.DILNLAZ_SPCL_HODY_NUM_DYS,		0) AS DILNLAZ_SPCL_HODY_NUM_DYS
						   , NVL(FF.DILNLAZ_SAT_DUTY_NUM_DYS,		0) AS DILNLAZ_SAT_DUTY_NUM_DYS
						   , NVL(GG.DILNLAZ_PUBC_HODY_DUTY_NUM_DYS, 0) AS DILNLAZ_PUBC_HODY_DUTY_NUM_DYS
						   , NVL(FF.DILNLAZ_ABNCE_DUTY_RCGTN_DYS,	0) AS DILNLAZ_ABNCE_DUTY_RCGTN_DYS
						   , NVL(FF.DILNLAZ_TOT_DUTY_TM,			0) AS DILNLAZ_TOT_DUTY_TM
						   , NVL(FF.DILNLAZ_PAID_HODY_NUM_DYS,		0) AS DILNLAZ_PAID_HODY_NUM_DYS
						   , NVL(FF.DILNLAZ_TFC_ASS_CST_NUM_DYS,	0) AS DILNLAZ_TFC_ASS_CST_NUM_DYS
						   , NVL(FF.DILNLAZ_LNCH_DYS,				0) AS DILNLAZ_LNCH_DYS
						   , NVL(GG.DILNLAZ_PUBC_HODY_DUTY_TM,		0) AS DILNLAZ_PUBC_HODY_DUTY_TM
						   , NVL(GG.DILNLAZ_TOT_NTOT_NUM_DYS,		0) AS DILNLAZ_TOT_NTOT_NUM_DYS
						   , NVL(GG.DILNLAZ_TOT_NTOT_TM,			0) AS DILNLAZ_TOT_NTOT_TM
						   , NVL(GG.DILNLAZ_FNDTN_TM_RST_DUTY_TM,	0) AS DILNLAZ_FNDTN_TM_RST_DUTY_TM
						   , NVL(GG.DILNLAZ_TM_RST_DUTY_TM,			0) AS DILNLAZ_TM_RST_DUTY_TM
						   , NVL(GG.DILNLAZ_TOT_TM_RST_DUTY_TM,		0) AS DILNLAZ_TOT_TM_RST_DUTY_TM
					 FROM	 PAYR0500 AA
						   , PSNL0100 BB
						   , DLGN0100 FF
						   , DLGN0200 GG
					 WHERE	 AA.DPOB_CD			= BB.DPOB_CD
					 AND	 AA.SYSTEMKEY		= BB.SYSTEMKEY 
					 AND	 AA.DPOB_CD			= FF.DPOB_CD 
					 AND	 AA.SYSTEMKEY		= FF.SYSTEMKEY  
					 AND	 FF.DILNLAZ_YR_MNTH = GG.DILNLAZ_EXCE_DUTY_YR_MNTH(+) 
					 AND	 FF.PAY_CD			= GG.PAY_CD(+) 
					 AND	 FF.DPOB_CD			= GG.DPOB_CD(+) 
					 AND	 FF.SYSTEMKEY		= GG.SYSTEMKEY(+)  
					 <isNotEmpty prepend="AND" property="dpobCd" >
						AA.DPOB_CD = #dpobCd#
					 </isNotEmpty>
					 AND EXISTS (
                        SELECT  C.DPOB_CD,
                                 C.DTIL_OCCU_INTTN_CD,
                                 C.TYP_OCCU_CD,
                                 C.DEPT_CD FROM 
                                             ( SELECT * 
                                                 FROM TABLE(PKG_DTIL_AUTH.FN_DTIL_AUTH_TB(#dpobCd#,#payrMangDeptYn#,#payrMangDeptCd#,#deptCd#,#usrId#,#deptCdAuth#,'' )) ) C
                                            WHERE     C.DPOB_CD = BB.DPOB_CD
						                        AND C.DEPT_CD = BB.CURR_AFFN_DEPT_CD
						                        AND NVL(C.TYP_OCCU_CD,'TT')  = NVL(BB.TYP_OCCU_CD,'TT') 
                                                AND NVL(C.DTIL_OCCU_INTTN_CD,'TT')  = NVL(BB.DTIL_OCCU_INTTN_CD,'TT')
                                               <isNotEmpty property="deptCd" prepend="AND">
												<![CDATA[
												 C.DEPT_CD
												]]>
												<iterate prepend="IN" property="deptCdArr" open="(" close=")" conjunction=",">
												 #deptCdArr[]#
												</iterate>
												</isNotEmpty> 
                                          )  
				       <isNotEmpty prepend="AND" property="businCd" >
					 	BB.BUSIN_CD=#businCd#
				       </isNotEmpty> 
				       <isNotEmpty prepend="AND" property="payrMangDeptCd" >
					 	AA.PAYR_MANG_DEPT_CD=#payrMangDeptCd#
				       </isNotEmpty> 
				       <isNotEmpty prepend="AND" property="emymtDivCd" >
					 	BB.EMYMT_DIV_CD=#emymtDivCd#
					 	</isNotEmpty>
				       <isNotEmpty prepend="AND" property="payCd" >
					 	FF.PAY_CD=#payCd#
				       </isNotEmpty> 
				         <isNotEmpty prepend="AND" property="pymtYrMnth" >
					 	FF.DILNLAZ_YR_MNTH = #pymtYrMnth#
				       </isNotEmpty>  
				       <isNotEmpty prepend="AND" property="repbtyBusinDivCd">
							BB.REPBTY_BUSIN_DIV_CD = #repbtyBusinDivCd# 
				    	</isNotEmpty>
				       <isNotEmpty property="typOccuCd" prepend="AND">
							<![CDATA[
							 BB.TYP_OCCU_CD
							]]>
							<iterate prepend="IN" property="typOccuCdArr" open="(" close=")" conjunction=",">
							 #typOccuCdArr[]#
							</iterate>
							</isNotEmpty>  
						   <!--  <isNotEmpty property="pyspGrdeCd" prepend="AND">
							<![CDATA[
							 NVL(BB.PYSP_GRDE_CD,'A0060000')
							]]>
							<iterate prepend="IN" property="pyspGrdeCdArr" open="(" close=")" conjunction=",">
							 #pyspGrdeCdArr[]#
							</iterate>
							</isNotEmpty>  --> 
							 <isNotEmpty property="dtilOccuInttnCd" prepend="AND">
							<![CDATA[
								 BB.DTIL_OCCU_INTTN_CD
							]]>
							<iterate prepend="IN" property="dtilOccuInttnCdArr" open="(" close=")" conjunction=",">
								 #dtilOccuInttnCdArr[]#
							</iterate>
						</isNotEmpty>
				         <isNotEmpty prepend="AND" property="systemkey" >
					 	BB.SYSTEMKEY=#systemkey#
				       </isNotEmpty>  
				       <isNotEmpty prepend="AND" property="hanNm" >
					 	BB.HAN_NM LIKE '%' || #hanNm# || '%'
				       </isNotEmpty>   
					ORDER BY 
						FF.DPOB_CD ASC
						, FF.DILNLAZ_YR_MNTH DESC
						, PAY_CD ASC
						,(SELECT LPAD(DEPT_RANK,5,'0')  
                                   FROM BASS0400 DD
                                   WHERE DD.DEPT_CD = BB.CURR_AFFN_DEPT_CD
                                     AND DD.DPOB_CD = BB.DPOB_CD) ASC 
					        
						, BB.RESN_REGN_NUM ASC
						 , BB.SYSTEMKEY ASC 
		
				<![CDATA[					
			) A WHERE ROWNUM <= #lastIndex#
		)WHERE RNUM >= #firstIndex#
		]]>
	</select>
</sqlMap>
