<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="PGRM_Bass0120">
	
	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="prgmBass0120SrhVo" type="com.app.exterms.prgm.server.vo.PrgmComBass0120SrhVO"/> 
	
	<resultMap id="prgmBass0120" class="com.app.exterms.prgm.server.vo.PrgmComBass0120VO">
		<result property="dpobCd" 				column="DPOB_CD" 					columnIndex="1"/>
		<result property="utDpobCd" 			column="UT_DPOB_CD" 				columnIndex="2"/>
		<result property="utDpobNm" 			column="UT_DPOB_NM" 				columnIndex="3"/>
		<result property="hhrkUntDpobCd" 		column="HHRK_UNT_DPOB_CD" 			columnIndex="4"/>
		<result property="degtrResnRegnNum" 	column="DEGTR_RESN_REGN_NUM" 		columnIndex="5"/>
		<result property="degtrNm" 				column="DEGTR_NM" 					columnIndex="6"/>
		<result property="frgnrDivCd" 			column="FRGNR_DIV_CD" 				columnIndex="7"/>
		<result property="busoprRgstnNum" 		column="BUSOPR_RGSTN_NUM" 			columnIndex="8"/>
		<result property="corpRgstnNum" 		column="CORP_RGSTN_NUM" 			columnIndex="9"/>
		<result property="corpDivCd" 			column="CORP_DIV_CD" 				columnIndex="10"/>
		<result property="untDpobZpcd" 			column="UNT_DPOB_ZPCD" 				columnIndex="11"/>
		<result property="untDpobFndtnAddr" 	column="UNT_DPOB_FNDTN_ADDR" 		columnIndex="12"/>
		<result property="untDpobDtlPatrAddr" 	column="UNT_DPOB_DTL_PATR_ADDR" 	columnIndex="13"/>
		<result property="untDpobPhnNum" 		column="UNT_DPOB_PHN_NUM" 			columnIndex="14"/>
		<result property="untDpobFaxNum" 		column="UNT_DPOB_FAX_NUM" 			columnIndex="15"/>
		<result property="untDpobEctnMailAddr" 	column="UNT_DPOB_ECTN_MAIL_ADDR" 	columnIndex="16"/>
		<result property="untDpobBncdsNm" 		column="UNT_DPOB_BNCDS_NM" 			columnIndex="17"/>
		<result property="untDpobItemNm" 		column="UNT_DPOB_ITEM_NM" 			columnIndex="18"/>
		<result property="untDpobMnPrdt" 		column="UNT_DPOB_MN_PRDT" 			columnIndex="19"/>
		<result property="untDpobEsbmDt" 		column="UNT_DPOB_ESBM_DT" 			columnIndex="20"/>
		<result property="untDpobIngnDt" 		column="UNT_DPOB_INGN_DT" 			columnIndex="21"/>
		<result property="untDpobEobDt" 		column="UNT_DPOB_EOB_DT" 			columnIndex="22"/>
		<result property="untDpobSealWrdNm" 	column="UNT_DPOB_SEAL_WRD_NM" 		columnIndex="23"/>
		<result property="untDpobSealRfta" 		column="UNT_DPOB_SEAL_RFTA" 		columnIndex="24"/>
		<result property="untDpobSealFlnm" 		column="UNT_DPOB_SEAL_FLNM" 		columnIndex="25"/>
		<result property="untDpobFndtnUseYn" 	column="UNT_DPOB_FNDTN_USE_YN" 		columnIndex="26"/>
		<result property="kybdr" 				column="KYBDR" 						columnIndex="27"/>
		<result property="inptDt" 				column="INPT_DT" 					columnIndex="28"/>
		<result property="inptAddr" 			column="INPT_ADDR" 					columnIndex="29"/>
		<result property="ismt" 				column="ISMT" 						columnIndex="30"/>
		<result property="revnDt" 				column="REVN_DT" 					columnIndex="31"/>
		<result property="revnAddr" 			column="REVN_ADDR" 					columnIndex="32"/>
		<result property="mtstBusinDivCd" 		column="MTST_BUSIN_DIV_CD" 			columnIndex="33"/>
		<result property="upDpobCmpNo" 				column="UP_DPOB_CMP_NO" 			columnIndex="34"/>
		<result property="upDpobUtynC171" 			column="UP_DPOB_UTYN_C171" 			columnIndex="35"/>
		<result property="mtstDpobSeilNumC172" 	column="MTST_DPOB_SEIL_NUM_C172" 			columnIndex="36"/>
		<result property="mnbhDivCd" 					column="MNBH_DIV_CD" 			columnIndex="37"/>
		<result property="whdgTxCtypDivCd" 			column="WHDG_TX_CTYP_DIV_CD" 			columnIndex="38"/>
	</resultMap>
	
 
	<select id="prgmComBass0120DAO.selectPrgmBass0120List_D" parameterClass="prgmBass0120SrhVo" resultClass="egovMap">
SELECT * FROM (
	SELECT A.*, ROWNUM RNUM FROM (
				SELECT
						DPOB_CD						/* 사업장코드				*/
						,UT_DPOB_CD					/* 단위사업장코드           */
						,UT_DPOB_NM					/* 단위사업장명             */
						,HHRK_UNT_DPOB_CD			/* 상위단위사업장코드       */
						,DEGTR_RESN_REGN_NUM		/* 대표자주민번호           */
						,DEGTR_NM					/* 대표자명                 */
						,FRGNR_DIV_CD				/* 내외국인구분코드         */
						,BUSOPR_RGSTN_NUM			/* 사업자등록번호           */
						,CORP_RGSTN_NUM				/* 법인등록번호             */
						,CORP_DIV_CD				/* 법인구분코드             */
						,UNT_DPOB_ZPCD				/* 단위사업장우편번호       */
						,UNT_DPOB_FNDTN_ADDR		/* 단위사업장기본주소       */
						,UNT_DPOB_DTL_PATR_ADDR		/* 단위사업장상세주소       */
						,UNT_DPOB_PHN_NUM			/* 단위사업장전화번호       */
						,UNT_DPOB_FAX_NUM			/* 단위사업장팩스번호       */
						,UNT_DPOB_ECTN_MAIL_ADDR	/* 단위사업장전자우편주소   */
						,UNT_DPOB_BNCDS_NM			/* 단위사업장업종_업태      */
						,UNT_DPOB_ITEM_NM			/* 단위사업장업종_종목명    */
						,UNT_DPOB_MN_PRDT			/* 단위사업장업종_주생산품  */
						,UNT_DPOB_ESBM_DT			/* 단위사업장설립일자       */
						,UNT_DPOB_INGN_DT			/* 단위사업장개업일자       */
						,UNT_DPOB_EOB_DT			/* 단위사업장폐업일자       */
						,UNT_DPOB_SEAL_WRD_NM		/* 단위사업장직인문구명     */
						,UNT_DPOB_SEAL_RFTA			/* 단위사업장직인경로       */
						,UNT_DPOB_SEAL_FLNM			/* 단위사업장직인파일명     */
						,UNT_DPOB_FNDTN_USE_YN		/* 단위사업장기본사용여부   */
						,KYBDR						/* 입력자                   */
						,INPT_DT					/* 입력일자                 */
						,INPT_ADDR					/* 입력주소                 */
						,ISMT						/* 수정자                   */
						,REVN_DT					/* 수정일자                 */
						,REVN_ADDR					/* 수정주소                 */
						,MTST_BUSIN_DIV_CD			/* 주종사업장구분코드       */
						, fcBass0300CDNM (DPOB_CD, MTST_BUSIN_DIV_CD) AS MTST_BUSIN_DIV_NM 			/* 주종사업장구분명       */
						,UP_DPOB_CMP_NO				/* 단위사업장승인번호 */
						,UP_DPOB_UTYN_C171			/* C171_사업자단위과세자여부 */
						,MTST_DPOB_SEIL_NUM_C172	/* C172_종사업장일련번호 */
						,MNBH_DIV_CD				/* 본지점구분코드 */
						,WHDG_TX_CTYP_DIV_CD		/* 원천세징수유형구분코드 */
							, fcBass0300CDNM (DPOB_CD, WHDG_TX_CTYP_DIV_CD) AS WHDG_TX_CTYP_DIV_NM 		
					FROM BASS0120
				WHERE 1=1
				<isNotNull property="utDpobNm">
				    <isNotEmpty property="utDpobNm">
				        AND UT_DPOB_NM like '%'|| #utDpobNm# || '%'
				    </isNotEmpty>
				</isNotNull>
				<isNotNull property="degtrNm">
				    <isNotEmpty property="degtrNm">
				        AND DEGTR_NM like '%'|| #degtrNm# || '%'
				    </isNotEmpty>
				</isNotNull>
				ORDER BY DPOB_CD ASC
		<![CDATA[					
	) A WHERE ROWNUM <= #lastIndex#
)WHERE RNUM >= #firstIndex#
]]>
	</select>	
 
	<select id="prgmComBass0120DAO.selectPrgmBass0120ListTotCnt_S" parameterClass="prgmBass0120SrhVo" resultClass="int">
			SELECT /* bass0120DAO.selectBass0120ListTotCnt_S */
				COUNT(*) totcnt
			FROM BASS0120
			WHERE 1=1
			<isNotNull property="utDpobNm">
			    <isNotEmpty property="utDpobNm">
			        AND UT_DPOB_NM like '%'|| #utDpobNm# || '%'
			    </isNotEmpty>
			</isNotNull>
			<isNotNull property="degtrNm">
			    <isNotEmpty property="degtrNm">
			        AND DEGTR_NM like '%'|| #degtrNm# || '%'
			    </isNotEmpty>
			</isNotNull>
	</select>

</sqlMap>
