<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="SsoxSmrmfUser">
	
	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="ssoxUserSrhVO" type="com.app.smrmf.sysm.server.vo.system.SsoxUserSrhVO"/>
	
	<resultMap id="ssoxUser" class="com.app.smrmf.sysm.server.vo.system.SsoxUserVO">
		<result property="userId" column="USER_ID" columnIndex="1"/>
		<result property="userName" column="USER_NAME" columnIndex="2"/>
		<result property="userSn" column="USER_SN" columnIndex="3"/>
		<result property="userStat" column="USER_STAT" columnIndex="4"/>
		<result property="userStatName" column="USER_STAT_NAME" columnIndex="5"/>
		<result property="regularity" column="REGULARITY" columnIndex="6"/>
		<result property="orgId" column="ORG_ID" columnIndex="7"/>
		<result property="orgName" column="ORG_NAME" columnIndex="8"/>
		<result property="deptId" column="DEPT_ID" columnIndex="9"/>
		<result property="deptName" column="DEPT_NAME" columnIndex="10"/>
		<result property="deptFullname" column="DEPT_FULLNAME" columnIndex="11"/>
		<result property="classId" column="CLASS_ID" columnIndex="12"/>
		<result property="className" column="CLASS_NAME" columnIndex="13"/>
		<result property="positionId" column="POSITION_ID" columnIndex="14"/>
		<result property="positionName" column="POSITION_NAME" columnIndex="15"/>
		<result property="gradeId" column="GRADE_ID" columnIndex="16"/>
		<result property="gradeName" column="GRADE_NAME" columnIndex="17"/>
		<result property="email" column="EMAIL" columnIndex="18"/>
		<result property="tel" column="TEL" columnIndex="19"/>
		<result property="mobile" column="MOBILE" columnIndex="20"/>
		<result property="joinDay" column="JOIN_DAY" columnIndex="21"/>
		<result property="retireDay" column="RETIRE_DAY" columnIndex="22"/>
		<result property="addInfo1" column="ADD_INFO1" columnIndex="23"/>
		<result property="addInfo2" column="ADD_INFO2" columnIndex="24"/>
		<result property="addInfo3" column="ADD_INFO3" columnIndex="25"/>
		<result property="addInfo4" column="ADD_INFO4" columnIndex="26"/>
		<result property="addInfo5" column="ADD_INFO5" columnIndex="27"/>
		<result property="addInfo6" column="ADD_INFO6" columnIndex="28"/>
		<result property="addInfo7" column="ADD_INFO7" columnIndex="29"/>
		<result property="baseSys" column="BASE_SYS" columnIndex="30"/>
		<result property="regDay" column="REG_DAY" columnIndex="31"/>
		<result property="updateDay" column="UPDATE_DAY" columnIndex="32"/>
		<result property="useYn" column="USE_YN" columnIndex="33"/>
		<result property="rdutyName" column="RDUTY_NAME" columnIndex="34"/>
	</resultMap>
	 
	<insert id="ssoxUserDAO.insertSsoxUser_S">
		<![CDATA[
			INSERT INTO SSOX_USER 
				( USER_ID
				  , USER_NAME
				  , USER_SN
				  , USER_STAT
				  , USER_STAT_NAME
				  , REGULARITY
				  , ORG_ID
				  , ORG_NAME
				  , DEPT_ID
				  , DEPT_NAME
				  , DEPT_FULLNAME
				  , CLASS_ID
				  , CLASS_NAME
				  , POSITION_ID
				  , POSITION_NAME
				  , GRADE_ID
				  , GRADE_NAME
				  , EMAIL
				  , TEL
				  , MOBILE
				  , JOIN_DAY
				  , RETIRE_DAY
				  , ADD_INFO1
				  , ADD_INFO2
				  , ADD_INFO3
				  , ADD_INFO4
				  , ADD_INFO5
				  , ADD_INFO6
				  , ADD_INFO7
				  , BASE_SYS
				  , REG_DAY
				  , UPDATE_DAY
				  , USE_YN
				  , RDUTY_NAME )
			VALUES ( #userId#
				  , #userName#
				  , #userSn#
				  , #userStat#
				  , #userStatName#
				  , #regularity#
				  , #orgId#
				  , #orgName#
				  , #deptId#
				  , #deptName#
				  , #deptFullname#
				  , #classId#
				  , #className#
				  , #positionId#
				  , #positionName#
				  , #gradeId#
				  , #gradeName#
				  , #email#
				  , #tel#
				  , #mobile#
				  , #joinDay#
				  , #retireDay#
				  , #addInfo1#
				  , #addInfo2#
				  , #addInfo3#
				  , #addInfo4#
				  , #addInfo5#
				  , #addInfo6#
				  , #addInfo7#
				  , #baseSys#
				  , #regDay#
				  , #updateDay#
				  , #useYn#
				  , #rdutyName# )
		]]>
	</insert>
	
	<update id="ssoxUserDAO.updateSsoxUser_S">
		<![CDATA[
			UPDATE SSOX_USER
			SET USER_ID=#userId#
				, USER_NAME=#userName#
				, USER_SN=#userSn#
				, USER_STAT=#userStat#
				, USER_STAT_NAME=#userStatName#
				, REGULARITY=#regularity#
				, ORG_ID=#orgId#
				, ORG_NAME=#orgName#
				, DEPT_ID=#deptId#
				, DEPT_NAME=#deptName#
				, DEPT_FULLNAME=#deptFullname#
				, CLASS_ID=#classId#
				, CLASS_NAME=#className#
				, POSITION_ID=#positionId#
				, POSITION_NAME=#positionName#
				, GRADE_ID=#gradeId#
				, GRADE_NAME=#gradeName#
				, EMAIL=#email#
				, TEL=#tel#
				, MOBILE=#mobile#
				, JOIN_DAY=#joinDay#
				, RETIRE_DAY=#retireDay#
				, ADD_INFO1=#addInfo1#
				, ADD_INFO2=#addInfo2#
				, ADD_INFO3=#addInfo3#
				, ADD_INFO4=#addInfo4#
				, ADD_INFO5=#addInfo5#
				, ADD_INFO6=#addInfo6#
				, ADD_INFO7=#addInfo7#
				, BASE_SYS=#baseSys#
				, REG_DAY=#regDay#
				, UPDATE_DAY=#updateDay#
				, USE_YN=#useYn#
				, RDUTY_NAME=#rdutyName#
			]]>
	</update>
	
	<delete id="ssoxUserDAO.deleteSsoxUser_S">
		<![CDATA[
			DELETE FROM SSOX_USER 
			]]>
	</delete>
	
	<select id="ssoxUserDAO.selectSsoxUser_S" resultMap="ssoxUser">
		<![CDATA[
			SELECT
				USER_ID
				, USER_NAME
				, USER_SN
				, USER_STAT
				, USER_STAT_NAME
				, REGULARITY
				, ORG_ID
				, ORG_NAME
				, DEPT_ID
				, DEPT_NAME
				, DEPT_FULLNAME
				, CLASS_ID
				, CLASS_NAME
				, POSITION_ID
				, POSITION_NAME
				, GRADE_ID
				, GRADE_NAME
				, EMAIL
				, TEL
				, MOBILE
				, JOIN_DAY
				, RETIRE_DAY
				, ADD_INFO1
				, ADD_INFO2
				, ADD_INFO3
				, ADD_INFO4
				, ADD_INFO5
				, ADD_INFO6
				, ADD_INFO7
				, BASE_SYS
				, REG_DAY
				, UPDATE_DAY
				, USE_YN
				, RDUTY_NAME
			FROM SSOX_USER 
			WHERE  USER_ID=#userId#
			AND USE_YN = '1'
		 	AND USER_STAT = 'AAA'
			]]>
	</select>
	
	<select id="ssoxUserDAO.selectSsoxUserList_D" parameterClass="ssoxUserSrhVO" resultClass="egovMap">
SELECT * FROM (
	SELECT A.*, ROWNUM RNUM FROM (
				SELECT
								USER_ID
								, USER_NAME
								, USER_ID AS USR_ID
								, USER_NAME AS USR_NM
								, USER_SN
								, USER_STAT
								, USER_STAT_NAME
								, REGULARITY
								, ORG_ID
								, ORG_NAME
								, (DEPT_ID || '00') AS DEPT_CD 
								, (DEPT_ID || '00') AS deptCddeptCd
								, fcBass0400CDNM(#dpobCd#,(DEPT_ID || '00'),'2') AS deptCddeptNmRtchnt
								, DEPT_ID
								, DEPT_NAME
								, DEPT_FULLNAME
								, CLASS_ID
								, CLASS_NAME
								, POSITION_ID
								, POSITION_NAME
								, GRADE_ID
								, GRADE_NAME
								, EMAIL
								, TEL
								, MOBILE
								, JOIN_DAY
								, RETIRE_DAY
								, ADD_INFO1
								, ADD_INFO2
								, ADD_INFO3
								, ADD_INFO4
								, ADD_INFO5
								, ADD_INFO6
								, ADD_INFO7
								, BASE_SYS
								, REG_DAY
								, UPDATE_DAY
								, USE_YN
								, RDUTY_NAME
						FROM SSOX_USER
				WHERE 1=1 
				<isNotEmpty prepend="AND" property="ssoUsrId">
					  USER_ID = #ssoUsrId#
				</isNotEmpty> 
				<isNotEmpty prepend="AND" property="userName">
					USER_NAME LIKE '%' || #userName# || '%' 
				</isNotEmpty> 
				<isNotEmpty prepend="AND" property="deptId">
					DEPT_ID = #deptId#  
				</isNotEmpty>
					ORDER BY USER_NAME ASC
	
		<![CDATA[					
	) A WHERE ROWNUM <= #lastIndex#
)WHERE RNUM >= #firstIndex#
]]>
	</select>	
	<select id="ssoxUserDAO.selectSsoxUserListTotCnt_S" parameterClass="ssoxUserSrhVO" resultClass="int">
			SELECT COUNT(*) totcnt
			FROM SSOX_USER
			WHERE 1=1
			    <isNotEmpty prepend="AND" property="ssoUsrId">
					  USER_ID = #ssoUsrId#
				</isNotEmpty> 
				<isNotEmpty prepend="AND" property="userName">
					USER_NAME LIKE '%' || #userName# || '%' 
				</isNotEmpty> 
				<isNotEmpty prepend="AND" property="deptId">
					DEPT_ID = #deptId#  
				</isNotEmpty>
	</select>
	
	<!-- magicsso  -->
	<select id="ssoxUserDAO.selectMagicSsoUserList_D" parameterClass="ssoxUserSrhVO" resultClass="egovMap">
SELECT * FROM (
	SELECT A.*, ROWNUM RNUM FROM (
				SELECT
								USER_ID
								, USER_NAME
								, USER_ID AS USR_ID
								, USER_NAME AS USR_NM
								, USER_SN
								, USER_STAT
								, USER_STAT_NAME
								, REGULARITY
								, ORG_ID
								, ORG_NAME
								, (DEPT_ID || '00') AS DEPT_CD 
								, (DEPT_ID || '00') AS deptCddeptCd
								, fcBass0400CDNM(#dpobCd#,(DEPT_ID || '00'),'2') AS deptCddeptNmRtchnt
								, DEPT_ID
								, DEPT_NAME
								, DEPT_FULLNAME
								, CLASS_ID
								, CLASS_NAME
								, POSITION_ID
								, POSITION_NAME
								, GRADE_ID
								, GRADE_NAME
								, EMAIL
								, TEL
								, MOBILE
								, JOIN_DAY
								, RETIRE_DAY
								, ADD_INFO1
								, ADD_INFO2
								, ADD_INFO3
								, ADD_INFO4
								, ADD_INFO5
								, ADD_INFO6
								, ADD_INFO7
								, BASE_SYS
								, REG_DAY
								, UPDATE_DAY
								, USE_YN
								, RDUTY_NAME
						FROM SSOX_USER
				WHERE 1=1 
				<isNotEmpty prepend="AND" property="ssoUsrId">
					  USER_ID = #ssoUsrId#
				</isNotEmpty> 
				<isNotEmpty prepend="AND" property="userName">
					USER_NAME LIKE '%' || #userName# || '%' 
				</isNotEmpty> 
				<isNotEmpty prepend="AND" property="deptId">
					DEPT_ID = #deptId#  
				</isNotEmpty>
					ORDER BY USER_NAME ASC
	
		<![CDATA[					
	) A WHERE ROWNUM <= #lastIndex#
)WHERE RNUM >= #firstIndex#
]]>
	</select>	
	<select id="ssoxUserDAO.selectMagicSsoUserListTotCnt_S" parameterClass="ssoxUserSrhVO" resultClass="int">
			SELECT COUNT(*) totcnt
			FROM SSOX_USER
			WHERE 1=1
			    <isNotEmpty prepend="AND" property="ssoUsrId">
					  USER_ID = #ssoUsrId#
				</isNotEmpty> 
				<isNotEmpty prepend="AND" property="userName">
					USER_NAME LIKE '%' || #userName# || '%' 
				</isNotEmpty> 
				<isNotEmpty prepend="AND" property="deptId">
					DEPT_ID = #deptId#  
				</isNotEmpty>
	</select>
	

</sqlMap>
